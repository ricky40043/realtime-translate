# 多語言即時聊天應用 - 使用說明書

## 🌟 應用簡介

這是一個支持多語言實時翻譯的聊天應用，具備語音轉文字、即時翻譯和多用戶協作功能。支持手機和桌面設備，提供響應式用戶界面。

## 🌐 當前可用網址

```
https://04537c7e118f.ngrok-free.app
```

## 📱 功能頁面

### 1. 用戶模式 (User View)
**網址**: https://04537c7e118f.ngrok-free.app/user

**功能特色**:
- 🎤 **語音輸入**: 按住說話按鈕進行語音輸入
- 🌍 **個人字幕**: 根據您的慣用語顯示翻譯字幕
- ⚙️ **語言設定**: 可設定慣用語和主板顯示語言
- 💬 **文字輸入**: 支持鍵盤文字輸入
- 📱 **手機優化**: 完全響應式設計，手機使用體驗優良

**操作說明**:
1. 進入頁面後會自動創建用戶身份
2. 設定您的慣用語（個人字幕語言）
3. 設定主板顯示語言
4. 使用語音或文字與其他用戶交流

### 2. 主板模式 (Host Board)
**網址**: https://04537c7e118f.ngrok-free.app/host

**功能特色**:
- 📺 **主板顯示**: 大屏幕顯示所有翻譯後的訊息
- 👥 **用戶管理**: 顯示在線用戶數量
- 🔗 **連結分享**: 一鍵複製用戶參與連結
- 🔧 **除錯模式**: 可查看 WebSocket 通訊狀態
- 📊 **即時統計**: 顯示訊息數量和連線狀態

**操作說明**:
1. 主板會自動創建或載入房間
2. 點擊「分享用戶連結」邀請其他人加入
3. 所有用戶的發言會即時顯示在主板上
4. 支持多語言翻譯顯示

### 3. 房間模式 (Room View)
**網址**: https://04537c7e118f.ngrok-free.app/room

**功能特色**:
- 🎭 **混合視圖**: 同時顯示個人字幕和主板訊息
- 🎤 **雙語音模式**: 
  - 直接翻譯模式
  - 分段處理模式
- 📱 **語言選擇**: 支持多種語言輸入
- 💬 **即時通訊**: WebSocket 即時訊息傳遞

**操作說明**:
1. 選擇語音模式（直接翻譯 vs 分段處理）
2. 選擇輸入語言（可自動偵測）
3. 使用語音或文字進行交流
4. 同時查看個人字幕和主板訊息

## 🎤 語音功能使用指南

### 語音輸入步驟
1. **授權麥克風**: 首次使用會要求麥克風權限
2. **按住說話**: 長按語音按鈕開始錄音
3. **放開完成**: 釋放按鈕完成錄音
4. **自動處理**: 系統自動進行語音轉文字和翻譯

### 支持語言
- 🇹🇼 繁體中文 (zh-TW)
- 🇨🇳 簡體中文 (zh-CN)
- 🇺🇸 英語 (en)
- 🇯🇵 日語 (ja)
- 🇰🇷 韓語 (ko)
- 🇪🇸 西班牙語 (es)
- 🇫🇷 法語 (fr)
- 🇩🇪 德語 (de)

## 📱 手機使用指南

### 手機版優化功能
- ✅ **大按鈕設計**: 語音按鈕針對觸控優化
- ✅ **響應式布局**: 自動適應螢幕大小
- ✅ **觸控友好**: 所有按鈕符合手機觸控標準
- ✅ **垂直布局**: 手機版採用垂直排列
- ✅ **大字體**: 適合手機閱讀的字體大小

### 手機操作技巧
1. **語音輸入**: 長按語音按鈕，確保授權麥克風權限
2. **頁面縮放**: 支持手機瀏覽器的縮放功能
3. **橫豎屏**: 支持橫豎屏切換
4. **觸控滾動**: 支持觸控滾動查看歷史訊息

## 🔧 技術架構

### 前端技術
- **Vue.js 3**: 響應式前端框架
- **TypeScript**: 類型安全的 JavaScript
- **Vite**: 快速構建工具
- **響應式 CSS**: 手機優先設計

### 後端技術
- **FastAPI**: Python 高性能 API 框架
- **WebSocket**: 即時通訊
- **PostgreSQL**: 關聯式資料庫
- **Redis**: 快取和會話管理

### 基礎設施
- **Docker**: 容器化部署
- **nginx**: 反向代理和靜態文件服務 (透過 volume 掛載前端構建文件)
- **ngrok**: 對外網址隧道

## 🚀 一鍵部署指南

### 快速啟動
```bash
# 使用快速部署腳本
./quick-deploy-ngrok.sh
```

### 手動部署
```bash
# 1. 啟動 Docker 服務
docker-compose up --build -d

# 2. 啟動 ngrok 隧道
ngrok http 80

# 3. 複製前端文件到 nginx
docker cp frontend/dist/. polyglot-chat_nginx_1:/usr/share/nginx/html/
```

### 停止服務
```bash
# 使用停止腳本
./stop-quick.sh

# 或手動停止
docker-compose down
pkill ngrok
```

## 🔗 分享和協作

### 邀請用戶參與
1. 進入主板模式: https://04537c7e118f.ngrok-free.app/host
2. 點擊「分享用戶連結」按鈕
3. 將連結發送給其他用戶
4. 用戶點擊連結即可加入聊天

### 多用戶測試建議
1. **主持人**: 使用主板模式管理聊天室
2. **參與者**: 使用用戶模式參與聊天
3. **語言測試**: 不同用戶使用不同語言測試翻譯功能
4. **設備測試**: 同時使用手機和電腦測試兼容性

## 🛠️ 故障排除

### 常見問題

#### 1. 語音按鈕不可見
- **檢查**: 確認使用手機瀏覽器訪問
- **解決**: 重新加載頁面，確保 CSS 正確載入

#### 2. 麥克風無法使用
- **檢查**: 瀏覽器麥克風權限
- **解決**: 在瀏覽器設定中允許麥克風權限

#### 3. 翻譯不準確
- **檢查**: 語言設定是否正確
- **解決**: 重新設定慣用語和目標語言

#### 4. 連線問題
- **檢查**: 網路連線狀態
- **解決**: 重新整理頁面或重啟服務

### 服務管理命令

```bash
# 查看服務狀態
docker-compose ps

# 查看日誌
docker-compose logs -f

# 重啟特定服務
docker-compose restart nginx
docker-compose restart backend

# 查看 ngrok 狀態
curl http://localhost:4040/api/tunnels
```

## 🔒 安全須知

### 隱私保護
- 語音數據僅用於即時轉換，不會儲存
- 聊天記錄保存在本地資料庫
- ngrok 隧道為臨時性，重啟後網址會變更

### 使用建議
- 適合內部測試和演示使用
- 生產環境建議使用正式域名和 SSL 證書
- 定期更新依賴套件確保安全性

## 📊 功能特色總結

### ✅ 已實現功能
- 🎤 語音轉文字 (支援多語言)
- 🌍 即時翻譯 (8種主要語言)
- 💬 即時聊天 (WebSocket)
- 👥 多用戶協作
- 📱 手機響應式設計
- 🔄 一鍵部署
- 🌐 對外網址自動生成

### 🎯 適用場景
- 多語言會議
- 國際團隊協作
- 語言學習輔助
- 跨文化交流
- 即時翻譯需求

## 📞 技術支持

如有技術問題，可以：
1. 查看 Docker 容器日誌
2. 檢查 ngrok 連線狀態
3. 重啟相關服務
4. 查看瀏覽器開發者工具

---

**更新時間**: 2025年10月6日  
**版本**: v1.0.0  
**技術棧**: Vue.js + FastAPI + Docker + nginx + ngrok