# 即時翻譯字幕系統 - 使用指南

## 🎉 功能完成狀態

### ✅ 已實作功能
- **文字翻譯**: 支援多語言即時翻譯（模擬模式）
- **語音轉文字**: 瀏覽器錄音 + STT 服務（模擬模式）
- **即時字幕**: 個人視圖大字顯示
- **主板訊息**: 多人房間訊息流
- **房間管理**: 建立房間、語言設定
- **WebSocket 即時通訊**: 自動連線和重連
- **響應式 UI**: 適配桌面和行動裝置

### 🚀 如何使用

#### 1. 啟動系統
確保服務正在運行：
- 前端：http://localhost:5173
- 後端：http://localhost:8081
- 資料庫和 Redis 服務

#### 2. 基本使用流程

**步驟 1: 進入房間**
1. 開啟瀏覽器，訪問 http://localhost:5173
2. 系統會自動建立匿名用戶並進入房間
3. 看到房間介面，包含：
   - 頂部：個人字幕顯示區域
   - 下方：主板訊息流
   - 底部：輸入控制區

**步驟 2: 文字輸入測試**
1. 在底部文字框輸入訊息（支援中英日韓等多語言）
2. 按 Enter 或點擊「發送」按鈕
3. 觀察翻譯結果：
   - 個人字幕區會顯示翻譯成你偏好語言的大字字幕
   - 主板區會顯示翻譯成主板語言的訊息卡片

**步驟 3: 語音輸入測試**
1. 點擊「語音輸入」按鈕
2. 允許瀏覽器使用麥克風權限
3. 開始說話，可以看到：
   - 錄音指示器和音量條
   - 錄音時間計數
4. 再次點擊停止錄音
5. 系統會自動：
   - 進行語音轉文字
   - 翻譯成多語言
   - 顯示在個人字幕和主板上

**步驟 4: 多人協作測試**
1. 複製房間連結（點擊「分享房間」按鈕）
2. 在另一個瀏覽器視窗或裝置開啟連結
3. 兩個用戶可以看到彼此的訊息
4. 每個用戶看到的翻譯語言可能不同（根據個人偏好）

**步驟 5: 調整設定**
1. 點擊「設定」按鈕
2. 可以調整：
   - 個人偏好語言（影響個人字幕顯示）
   - 主板預設語言
   - 特定講者的語言覆寫規則

### 📱 介面說明

#### 個人字幕區域（頂部）
- 顯示翻譯成你偏好語言的大字字幕
- 包含講者名稱和語言標籤
- 字體大小會根據文字長度自動調整

#### 主板訊息流（中間）
- 顯示所有房間訊息的時間軸
- 每條訊息包含：
  - 講者頭像和姓名
  - 翻譯後的文字內容
  - 語言轉換資訊（原語言 → 目標語言）
  - 時間戳記

#### 輸入控制區（底部）
- **語言選擇**: 選擇輸入文字的語言（可自動偵測）
- **語音輸入**: 點擊開始/停止錄音
- **文字輸入**: 多行文字框，支援 Shift+Enter 換行
- **發送按鈕**: 送出文字訊息

### 🎯 進階功能

#### 語言覆寫
在設定頁面可以為特定講者設定主板顯示語言：
1. 輸入講者名稱或 ID
2. 選擇該講者的專屬顯示語言
3. 儲存設定
4. 該講者的訊息會以指定語言顯示在主板上

#### 即時連線狀態
- 頂部會顯示連線狀態指示器
- 綠點：已連線
- 紅點：連線中或斷線
- 系統會自動重新連線

### 🔧 模擬模式說明

目前系統運行在模擬模式下，無需真實的 API 金鑰：

#### 翻譯模擬
- 常見詞彙（你好、謝謝等）會有準確翻譯
- 其他文字會加上 `[翻譯]` 前綴標記
- 模擬 API 延遲和品質評分

#### 語音轉文字模擬
- 系統會根據錄音時間長度選擇預設文字
- 模擬不同語言的轉錄結果
- 提供模擬的信心度評分

### 📊 測試建議

#### 基本功能測試
1. **文字翻譯**: 輸入「你好」、「thank you」、「こんにちは」等測試翻譯
2. **語音輸入**: 錄製不同長度的音頻測試 STT
3. **多語言**: 嘗試不同語言的輸入和顯示
4. **即時性**: 觀察訊息的即時廣播效果

#### 多人協作測試
1. 開啟多個瀏覽器視窗模擬不同用戶
2. 設定不同的偏好語言
3. 測試訊息同步和翻譯效果
4. 驗證語言覆寫功能

#### 響應式測試
1. 在不同裝置上測試（桌面、平板、手機）
2. 調整瀏覽器視窗大小
3. 測試觸控操作

### 🚀 生產環境部署

要部署到生產環境，需要：

1. **設定真實 API 金鑰**:
   ```bash
   # 更新 .env 檔案
   TRANSLATE_PROVIDER=google
   GOOGLE_API_KEY=你的真實API金鑰
   STT_PROVIDER=google
   ```

2. **設定 HTTPS 和域名**
3. **配置防火牆和安全設定**
4. **設定監控和日誌**
5. **優化效能設定**

### 💡 使用建議

- **最佳體驗**: 使用 Chrome 或 Firefox 瀏覽器
- **網路需求**: 穩定的網路連線以確保即時性
- **麥克風**: 確保良好的音頻輸入品質
- **多人使用**: 建議每人使用不同的裝置或瀏覽器
- **語言設定**: 根據實際需求調整個人和主板語言偏好

### 🆘 故障排除

#### 常見問題
1. **無法錄音**: 檢查瀏覽器麥克風權限
2. **連線失敗**: 確認後端服務正在運行
3. **翻譯不準確**: 目前為模擬模式，設定真實 API 可改善
4. **頁面空白**: 檢查前端服務和控制台錯誤訊息

#### 檢查服務狀態
```bash
# 檢查後端健康狀態
curl http://localhost:8081/health

# 檢查前端是否正常
curl http://localhost:5173

# 查看 Docker 服務
docker-compose ps
```